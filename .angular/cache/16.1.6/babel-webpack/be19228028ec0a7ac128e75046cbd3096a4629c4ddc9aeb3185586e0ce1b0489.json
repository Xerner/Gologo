{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { GameObjectComponent } from '../game-object/game-object.component';\nimport { Vector2 } from 'src/library/vectors';\nimport Bullet from 'src/library/game-objects/Bullet';\nimport * as i0 from \"@angular/core\";\nexport default class ShipComponent extends GameObjectComponent {\n  constructor() {\n    super();\n    this.leftArrowPressed = false;\n    this.rightArrowPressed = false;\n    this.input = 0;\n    this.speed = 0;\n    this.speedMod = 0.005; // percentage of the canvas width\n    this.id = \"player\";\n    this.sprite = 'assets/galaga ship.png';\n    this.onShotFired = new EventEmitter();\n    this.onEnemyKilled = new EventEmitter();\n    this.update = () => {\n      this.transform.position.x += this.speed * this.scene.canvas.resolution.x;\n    };\n    // this.collision.rect = new Vector2(1, 1);\n    this.transform.size = new Vector2(15, 16);\n    this.collision.rect = this.transform.size.copy();\n    this.collision.enabled = true;\n    this.gameObjectService.onSceneReady.subscribe(this.onSceneReady.bind(this));\n  }\n  test() {\n    console.log(this.transform);\n  }\n  onSceneReady(scene) {\n    this.scene = scene;\n    this.transform.position = new Vector2(scene.canvas.resolution.x / 2 - this.transform.size.x / 2, scene.canvas.resolution.y - scene.canvas.resolution.y * 0.15);\n  }\n  //#region Events\n  handleWindowBlur(event) {\n    this.leftArrowPressed = false;\n    this.rightArrowPressed = false;\n    this.speed = 0;\n  }\n  handleSpacebarDown(event) {\n    // console.log('pew pew');\n    var bullet = new Bullet(this, this.gameObjectService);\n    bullet.onEnemyCollision.subscribe(enemy => this.onEnemyKilled.emit(enemy));\n    this.onShotFired.emit(bullet);\n  }\n  handleArrowLeftDown(event) {\n    if (this.leftArrowPressed) return;\n    this.leftArrowPressed = true;\n    this.speed -= this.speedMod;\n    // console.log('arrow key left down', this.speed, this.transform.position.x);\n  }\n\n  handleArrowLeftUp(event) {\n    if (!this.leftArrowPressed) return;\n    this.leftArrowPressed = false;\n    this.speed += this.speedMod;\n    // console.log('arrow key left up', this.speed, this.transform.position.x);\n  }\n\n  handleArrowRightDown(event) {\n    if (this.rightArrowPressed) return;\n    this.rightArrowPressed = true;\n    this.speed += this.speedMod;\n    // console.log('arrow key right down', this.speed, this.transform.position.x);\n  }\n\n  handleArrowRightUp(event) {\n    if (!this.rightArrowPressed) return;\n    this.rightArrowPressed = false;\n    this.speed -= this.speedMod;\n    // console.log('arrow key right up', this.speed, this.transform.position.x);\n  }\n}\n\nShipComponent.ɵfac = function ShipComponent_Factory(t) {\n  return new (t || ShipComponent)();\n};\nShipComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ShipComponent,\n  selectors: [[\"app-ship\"]],\n  hostBindings: function ShipComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"blur\", function ShipComponent_blur_HostBindingHandler($event) {\n        return ctx.handleWindowBlur($event);\n      }, false, i0.ɵɵresolveWindow)(\"keydown.space\", function ShipComponent_keydown_space_HostBindingHandler($event) {\n        return ctx.handleSpacebarDown($event);\n      }, false, i0.ɵɵresolveWindow)(\"keydown.arrowleft\", function ShipComponent_keydown_arrowleft_HostBindingHandler($event) {\n        return ctx.handleArrowLeftDown($event);\n      }, false, i0.ɵɵresolveWindow)(\"keyup.arrowleft\", function ShipComponent_keyup_arrowleft_HostBindingHandler($event) {\n        return ctx.handleArrowLeftUp($event);\n      }, false, i0.ɵɵresolveWindow)(\"keydown.arrowright\", function ShipComponent_keydown_arrowright_HostBindingHandler($event) {\n        return ctx.handleArrowRightDown($event);\n      }, false, i0.ɵɵresolveWindow)(\"keyup.arrowright\", function ShipComponent_keyup_arrowright_HostBindingHandler($event) {\n        return ctx.handleArrowRightUp($event);\n      }, false, i0.ɵɵresolveWindow);\n    }\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 0,\n  vars: 0,\n  template: function ShipComponent_Template(rf, ctx) {},\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["EventEmitter","GameObjectComponent","Vector2","Bullet","ShipComponent","constructor","leftArrowPressed","rightArrowPressed","input","speed","speedMod","id","sprite","onShotFired","onEnemyKilled","update","transform","position","x","scene","canvas","resolution","size","collision","rect","copy","enabled","gameObjectService","onSceneReady","subscribe","bind","test","console","log","y","handleWindowBlur","event","handleSpacebarDown","bullet","onEnemyCollision","enemy","emit","handleArrowLeftDown","handleArrowLeftUp","handleArrowRightDown","handleArrowRightUp","selectors","hostBindings","ShipComponent_HostBindings","rf","ctx","$event","i0","ɵɵresolveWindow","ShipComponent_keydown_space_HostBindingHandler","ShipComponent_keydown_arrowleft_HostBindingHandler","ShipComponent_keyup_arrowleft_HostBindingHandler","ShipComponent_keydown_arrowright_HostBindingHandler","ShipComponent_keyup_arrowright_HostBindingHandler"],"sources":["C:\\Users\\km629\\Desktop\\Other\\Gologo\\src\\app\\components\\ship\\ship.component.ts"],"sourcesContent":["import { Component, EventEmitter, HostListener } from '@angular/core';\nimport { GameObjectComponent } from '../game-object/game-object.component';\nimport { Vector2 } from 'src/library/vectors';\nimport { SceneComponent } from '../scene/scene.component';\nimport Bullet from 'src/library/game-objects/Bullet';\nimport Transform from 'src/library/transform';\nimport Collision from 'src/library/collision';\nimport { verifyHostBindings } from '@angular/compiler';\nimport GameObject from 'src/library/game-objects/GameObject';\n\n@Component({\n\tselector: 'app-ship',\n\ttemplateUrl: './ship.component.html',\n\tstyleUrls: ['./ship.component.sass'],\n})\nexport default class ShipComponent extends GameObjectComponent {\n\tleftArrowPressed = false;\n\trightArrowPressed = false;\n\tinput: number = 0;\n\tspeed = 0;\n\tspeedMod = 0.005; // percentage of the canvas width\n    scene!: SceneComponent;\n    override id = \"player\"\n\toverride sprite = 'assets/galaga ship.png';\n\n    onShotFired = new EventEmitter<Bullet>()\n    onEnemyKilled = new EventEmitter<GameObject>()\n\n\tconstructor() {\n\t\tsuper();\n        // this.collision.rect = new Vector2(1, 1);\n\t\tthis.transform.size = new Vector2(15, 16)\n        this.collision.rect = this.transform.size.copy();\n        this.collision.enabled = true;\n\t\tthis.gameObjectService.onSceneReady.subscribe(this.onSceneReady.bind(this));\n\t}\n\n\toverride update = () => {\n\t\tthis.transform.position.x += this.speed * this.scene.canvas.resolution.x;\n\t};\n\n\ttest() {\n\t\tconsole.log(this.transform);\n\t}\n\n\tonSceneReady(scene: SceneComponent) {\n        this.scene = scene;\n\t\tthis.transform.position = new Vector2(\n\t\t\tscene.canvas.resolution.x / 2 - this.transform.size.x / 2,\n\t\t\tscene.canvas.resolution.y - (scene.canvas.resolution.y * 0.15)\n\t\t);\n\t}\n\n\t//#region Events\n\n\t@HostListener('window:blur', ['$event'])\n\thandleWindowBlur(event: any) {\n\t\tthis.leftArrowPressed = false;\n\t\tthis.rightArrowPressed = false;\n\t\tthis.speed = 0;\n\t}\n\n\t@HostListener('window:keydown.space', ['$event'])\n\thandleSpacebarDown(event: any) {\n\t\t// console.log('pew pew');\n\t\tvar bullet = new Bullet(this, this.gameObjectService);\n        bullet.onEnemyCollision.subscribe((enemy) => this.onEnemyKilled.emit(enemy))\n        this.onShotFired.emit(bullet);\n\t}\n\n\t@HostListener('window:keydown.arrowleft', ['$event'])\n\thandleArrowLeftDown(event: KeyboardEvent) {\n\t\tif (this.leftArrowPressed) return;\n\t\tthis.leftArrowPressed = true;\n\t\tthis.speed -= this.speedMod;\n\t\t// console.log('arrow key left down', this.speed, this.transform.position.x);\n\t}\n\n\t@HostListener('window:keyup.arrowleft', ['$event'])\n\thandleArrowLeftUp(event: any) {\n\t\tif (!this.leftArrowPressed) return;\n\t\tthis.leftArrowPressed = false;\n\t\tthis.speed += this.speedMod;\n\t\t// console.log('arrow key left up', this.speed, this.transform.position.x);\n\t}\n\n\t@HostListener('window:keydown.arrowright', ['$event'])\n\thandleArrowRightDown(event: any) {\n\t\tif (this.rightArrowPressed) return;\n\t\tthis.rightArrowPressed = true;\n\t\tthis.speed += this.speedMod;\n\t\t// console.log('arrow key right down', this.speed, this.transform.position.x);\n\t}\n\n\t@HostListener('window:keyup.arrowright', ['$event'])\n\thandleArrowRightUp(event: any) {\n\t\tif (!this.rightArrowPressed) return;\n\t\tthis.rightArrowPressed = false;\n\t\tthis.speed -= this.speedMod;\n\t\t// console.log('arrow key right up', this.speed, this.transform.position.x);\n\t}\n\n\t//#endregion\n}\n"],"mappings":"AAAA,SAAoBA,YAAY,QAAsB,eAAe;AACrE,SAASC,mBAAmB,QAAQ,sCAAsC;AAC1E,SAASC,OAAO,QAAQ,qBAAqB;AAE7C,OAAOC,MAAM,MAAM,iCAAiC;;AAWpD,eAAc,MAAOC,aAAc,SAAQH,mBAAmB;EAa7DI,YAAA;IACC,KAAK,EAAE;IAbR,KAAAC,gBAAgB,GAAG,KAAK;IACxB,KAAAC,iBAAiB,GAAG,KAAK;IACzB,KAAAC,KAAK,GAAW,CAAC;IACjB,KAAAC,KAAK,GAAG,CAAC;IACT,KAAAC,QAAQ,GAAG,KAAK,CAAC,CAAC;IAEN,KAAAC,EAAE,GAAG,QAAQ;IAChB,KAAAC,MAAM,GAAG,wBAAwB;IAEvC,KAAAC,WAAW,GAAG,IAAIb,YAAY,EAAU;IACxC,KAAAc,aAAa,GAAG,IAAId,YAAY,EAAc;IAWxC,KAAAe,MAAM,GAAG,MAAK;MACtB,IAAI,CAACC,SAAS,CAACC,QAAQ,CAACC,CAAC,IAAI,IAAI,CAACT,KAAK,GAAG,IAAI,CAACU,KAAK,CAACC,MAAM,CAACC,UAAU,CAACH,CAAC;IACzE,CAAC;IATM;IACN,IAAI,CAACF,SAAS,CAACM,IAAI,GAAG,IAAIpB,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;IACnC,IAAI,CAACqB,SAAS,CAACC,IAAI,GAAG,IAAI,CAACR,SAAS,CAACM,IAAI,CAACG,IAAI,EAAE;IAChD,IAAI,CAACF,SAAS,CAACG,OAAO,GAAG,IAAI;IACnC,IAAI,CAACC,iBAAiB,CAACC,YAAY,CAACC,SAAS,CAAC,IAAI,CAACD,YAAY,CAACE,IAAI,CAAC,IAAI,CAAC,CAAC;EAC5E;EAMAC,IAAIA,CAAA;IACHC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACjB,SAAS,CAAC;EAC5B;EAEAY,YAAYA,CAACT,KAAqB;IAC3B,IAAI,CAACA,KAAK,GAAGA,KAAK;IACxB,IAAI,CAACH,SAAS,CAACC,QAAQ,GAAG,IAAIf,OAAO,CACpCiB,KAAK,CAACC,MAAM,CAACC,UAAU,CAACH,CAAC,GAAG,CAAC,GAAG,IAAI,CAACF,SAAS,CAACM,IAAI,CAACJ,CAAC,GAAG,CAAC,EACzDC,KAAK,CAACC,MAAM,CAACC,UAAU,CAACa,CAAC,GAAIf,KAAK,CAACC,MAAM,CAACC,UAAU,CAACa,CAAC,GAAG,IAAK,CAC9D;EACF;EAEA;EAGAC,gBAAgBA,CAACC,KAAU;IAC1B,IAAI,CAAC9B,gBAAgB,GAAG,KAAK;IAC7B,IAAI,CAACC,iBAAiB,GAAG,KAAK;IAC9B,IAAI,CAACE,KAAK,GAAG,CAAC;EACf;EAGA4B,kBAAkBA,CAACD,KAAU;IAC5B;IACA,IAAIE,MAAM,GAAG,IAAInC,MAAM,CAAC,IAAI,EAAE,IAAI,CAACwB,iBAAiB,CAAC;IAC/CW,MAAM,CAACC,gBAAgB,CAACV,SAAS,CAAEW,KAAK,IAAK,IAAI,CAAC1B,aAAa,CAAC2B,IAAI,CAACD,KAAK,CAAC,CAAC;IAC5E,IAAI,CAAC3B,WAAW,CAAC4B,IAAI,CAACH,MAAM,CAAC;EACpC;EAGAI,mBAAmBA,CAACN,KAAoB;IACvC,IAAI,IAAI,CAAC9B,gBAAgB,EAAE;IAC3B,IAAI,CAACA,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACG,KAAK,IAAI,IAAI,CAACC,QAAQ;IAC3B;EACD;;EAGAiC,iBAAiBA,CAACP,KAAU;IAC3B,IAAI,CAAC,IAAI,CAAC9B,gBAAgB,EAAE;IAC5B,IAAI,CAACA,gBAAgB,GAAG,KAAK;IAC7B,IAAI,CAACG,KAAK,IAAI,IAAI,CAACC,QAAQ;IAC3B;EACD;;EAGAkC,oBAAoBA,CAACR,KAAU;IAC9B,IAAI,IAAI,CAAC7B,iBAAiB,EAAE;IAC5B,IAAI,CAACA,iBAAiB,GAAG,IAAI;IAC7B,IAAI,CAACE,KAAK,IAAI,IAAI,CAACC,QAAQ;IAC3B;EACD;;EAGAmC,kBAAkBA,CAACT,KAAU;IAC5B,IAAI,CAAC,IAAI,CAAC7B,iBAAiB,EAAE;IAC7B,IAAI,CAACA,iBAAiB,GAAG,KAAK;IAC9B,IAAI,CAACE,KAAK,IAAI,IAAI,CAACC,QAAQ;IAC3B;EACD;;;AArFoBN,aAAc,C;mBAAdA,aAAa;AAAA;AAAbA,aAAc,C;QAAdA,aAAa;EAAA0C,SAAA;EAAAC,YAAA,WAAAC,2BAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;;eAAbC,GAAA,CAAAf,gBAAA,CAAAgB,MAAA,CAAwB;MAAA,UAAAC,EAAA,CAAAC,eAAA,4BAAAC,+CAAAH,MAAA;QAAA,OAAxBD,GAAA,CAAAb,kBAAA,CAAAc,MAAA,CAA0B;MAAA,UAAAC,EAAA,CAAAC,eAAA,gCAAAE,mDAAAJ,MAAA;QAAA,OAA1BD,GAAA,CAAAR,mBAAA,CAAAS,MAAA,CAA2B;MAAA,UAAAC,EAAA,CAAAC,eAAA,8BAAAG,iDAAAL,MAAA;QAAA,OAA3BD,GAAA,CAAAP,iBAAA,CAAAQ,MAAA,CAAyB;MAAA,UAAAC,EAAA,CAAAC,eAAA,iCAAAI,oDAAAN,MAAA;QAAA,OAAzBD,GAAA,CAAAN,oBAAA,CAAAO,MAAA,CAA4B;MAAA,UAAAC,EAAA,CAAAC,eAAA,+BAAAK,kDAAAP,MAAA;QAAA,OAA5BD,GAAA,CAAAL,kBAAA,CAAAM,MAAA,CAA0B;MAAA,UAAAC,EAAA,CAAAC,eAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}